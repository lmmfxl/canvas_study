<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>面向过程的动态环形图</title>
</head>
<body>
    <div id="container"></div>
    <script src="js/lib/konva/konva.js"></script>
    <script>
        (function () {
            const stage = new Konva.Stage({
                x:0,
                y:0,
                width:window.innerWidth,
                height:window.innerHeight,
                container:'container'
            });

            const bgLayer = new Konva.Layer();
            stage.add(bgLayer);

            const innerCircle = new Konva.Circle({
                x:stage.width()/2,
                y:stage.height()/2,
                dash:[10,4],
                radius:180,
                stroke:'#ccc',
                strokeWidth:3
            });

            const outerCircle = new Konva.Circle({
                x:stage.width()/2,
                y:stage.height()/2,
                dash:[10,4],
                radius:280,
                stroke:'#ccc',
                strokeWidth:3
            });

            const centerCircle = new Konva.Circle({
                x:stage.width()/2,
                y:stage.height()/2,
                radius:80,
                fill:'blue',
            });

            const centerText = new Konva.Text({
                x:stage.width()/2 - 80,
                y:stage.height()/2 -13,
                fontSize:26,
                fill:'#fff',
                text:'太阳',
                align:'center',
                width:160

            })

            const innerRing = new Konva.Ring({
                x:stage.width()/2,
                y:stage.height()/2,
                innerRadius:80,
                outerRadius:120,
                fill:'#ccc',
                opacity:.5
            })

            bgLayer.add(innerCircle);
            bgLayer.add(outerCircle);
            bgLayer.add(centerCircle);
            bgLayer.add(centerText);
            bgLayer.add(innerRing);
            bgLayer.draw();

            const moveLayer = new Konva.Layer();
            stage.add(moveLayer);

            const earth = new Konva.Circle({
                x: stage.width()/2 + 180 * Math.cos((-60)*Math.PI/180),
                y:stage.height()/2 + 180 * Math.sin((-60)*Math.PI/180),
                radius:40,
                fill:'yellow',
                opacity:.5
            });

            const moon = new Konva.Circle({
                x:stage.width()/2 + 280 * Math.cos(120*Math.PI/180),
                y:stage.height()/2 + 280 * Math.sin(120*Math.PI/180),
                radius:40,
                fill:'green',
                opacity:.5
            });

            const earthText = new Konva.Text({
                x: stage.width()/2 + 180 * Math.cos((-60)*Math.PI/180)-20,
                y:stage.height()/2 + 180 * Math.sin((-60)*Math.PI/180)-7,
                width:40,
                align:'center',
                fontSize:16,
                fill:'#000',
                text:'地球'
            })

            const moonText = new Konva.Text({
                x:stage.width()/2 + 280 * Math.cos(120*Math.PI/180)-20,
                y:stage.height()/2 + 280 * Math.sin(120*Math.PI/180)-7,
                width:40,
                align:'center',
                fontSize:16,
                fill:'#000',
                text:'月球'
            })
            moveLayer.add(earth);
            moveLayer.add(moon);
            moveLayer.add(earthText);
            moveLayer.add(moonText);
            moveLayer.draw();


        })();
    </script>
</body>
</html>